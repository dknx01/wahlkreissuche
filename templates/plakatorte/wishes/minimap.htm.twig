{% block stylesheets %}
    {{ encore_entry_link_tags('wishMapLeafletLayerState') }}
{% endblock %}

    <div id="map" style="width: 350px!important;height: 350px!important;"> </div>

    {{ encore_entry_script_tags('wishMapLeafletLayerState') }}
    <script>

        const x = document.getElementById("demo");
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(showPosition);
            } else {
                x.innerHTML = "{{ 'geo_not_supported'|trans({}, 'generic') }}";
            }
        }
        function showPosition(position) {
            x.innerHTML = "Latitude: " + position.coords.latitude +
                "<br>Longitude: " + position.coords.longitude;
        }
    </script>
    <script>
        let places = {
            {% for district, placeDetails in places %}
            '{{ district }}': [
                {% for place in placeDetails %}
                {
                    'long': {{ place.address.longitude }},
                    'lat': {{ place.address.latitude }},
                    'desc': "{{ place.description }}",
                    'district': "{{ place.address.district }}",
                    'edit': "{{ path('wish_plakat_admin_edit', {id: place.id}) }}",
                    'createdAt': "{{ place.createdAt|date('d.m.Y H:i') }}",
                    'createdBy': "{{ place.createdBy }}",
                },
                {% endfor %}
            ],
            {% endfor %}
        };
        let mapCenter = {
            'zoom': {{ mapData.zoom }},
            'lon': {{ mapData.lon }},
            'lat': {{ mapData.lat }}
        }
        let wahllokaldata = [
            {% if wahllokale is defined %}
            {% for wahllokal in wahllokale %}
            {
                "long": "{{ wahllokal.longitude }}",
                "lat": "{{ wahllokal.latitude }}",
                "radius": {{ wahllokal.radius }},
                "description": "{{ wahllokal.description }}"
            },
            {% endfor %}
            {% endif %}
        ]
    </script>